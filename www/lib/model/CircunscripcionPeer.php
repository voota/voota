<?php

require 'lib/model/om/BaseCircunscripcionPeer.php';


/**
 * Skeleton subclass for performing query and update operations on the 'circunscripcion' table.
 *
 * 
 *
 * This class was autogenerated by Propel 1.4.1 on:
 *
 * Sun Oct 10 21:38:26 2010
 *
 * You should add additional methods to this class to meet the
 * application requirements.  This class will only be generated as
 * long as it does not already exist in the output directory.
 *
 * @package    lib.model
 */
class CircunscripcionPeer extends BaseCircunscripcionPeer {

	static public function retrieveForAutoSelect($q, $limit)
	{
	  	$criteria = new Criteria();
		$pieces = explode(" ", $q);
		$criterions = array();
		$idx = 0;
		$criteria->addJoin(GeoPeer::ID, CircunscripcionPeer::GEO_ID);
		
		
		foreach ($pieces as $piece){			
			sfContext::getInstance()->getLogger()->debug("A SEARCH PIECE $piece");
			$criterions[$idx] = $criteria->getNewCriterion(GeoPeer:: NOMBRE, '%'.$piece.'%', Criteria::LIKE);
		  	$criteria->addAnd( $criterions[$idx] );
		  	$idx++;	
		}
	
	  $criteria->addAscendingOrderByColumn(GeoPeer::NOMBRE);
	  $criteria->setLimit($limit);
	 
	  $circunscripciones = array();
	  foreach (CircunscripcionPeer::doSelect($criteria) as $circunscripcion)
	  {
	    $circunscripciones[$circunscripcion->getId()] = (string) $circunscripcion;
	  }
	 
	  return $circunscripciones;
	}
	
} // CircunscripcionPeer
